% Copyright 2014 by Emmanuel Boidot <eboidot3@gatech.edu>
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
\mode<presentation>

\usetheme{Warsaw}
\useinnertheme[shadow=true]{rounded}
\setbeamertemplate{frametitle}[default][shadow=false]
\useoutertheme[subsection=false]{miniframes}
\setbeamertemplate{mini frame in other section}[default][20]
\setbeamertemplate{section/subsection in toc}[subsections numbered]
\setbeamertemplate{subsection in navigation}{\vspace*{-\baselineskip}}
\setbeamertemplate{subsection in navigation shaded}{\vspace*{-\baselineskip}}
%\usepackage{multicol}

\definecolor{gtnavy}{rgb}{0,0,0.45}
\definecolor{gtgold}{RGB}{152,126,82}
\definecolor{gtlightgold}{RGB}{244,242,237}
\definecolor{gtdarknavy}{RGB}{0,43,85}
\definecolor{gtltgray}{rgb}{0.97,0.97,0.97}
\definecolor{gtmediumgold}{RGB}{172,151,116}
\definecolor{gtmediumgold}{RGB}{152,126,82}
	
\setbeamercolor*{separation line}{}
\setbeamercolor*{fine separation line}{}
\setbeamertemplate{navigation symbols}{}

% for first toc
\newenvironment<>{tocblock}[1][]{%
	\if@goldOption
		\setbeamercolor{block title}{fg=white,bg=gtgold}%
		\setbeamercolor{block body}{fg=white,bg=gtgold}%
	\else
		\setbeamercolor{block title}{fg=white,bg=gtdarknavy}%
		\setbeamercolor{block body}{fg=white,bg=gtdarknavy}%
	\fi
  	\begin{block}{#1}}{\end{block}}
  
% for section toc
\newenvironment<>{sectiontocblock}[1][]{%
	\if@goldOption
		\setbeamercolor{block title}{fg=white,bg=gtgold}%
		\setbeamercolor{block body}{fg=gtdarknavy,bg=white!75!bg!90!gtgold}%
	\else
		\setbeamercolor{block title}{fg=white,bg=gtgold}%
		\setbeamercolor{block body}{fg=gtdarknavy,bg=white!75!bg!90!gtgold}%
	\fi
  	\begin{block}{#1}}{\end{block}}

\newif\if@goldOption
\@goldOptionfalse
\DeclareOption{gold}{\@goldOptiontrue}

\newif\if@sectionTocOption
\@sectionTocOptionfalse
\DeclareOption{sectionToc}{\@sectionTocOptiontrue}

\newif\if@partTocOption
\@partTocOptionfalse
\DeclareOption{partToc}{\@partTocOptiontrue}

\ProcessOptions
% choose between dark and light colors
\if@goldOption
	\setbeamercolor{section in toc}{fg=gtdarknavy,bg=white}
	\setbeamercolor{section number projected}{bg=gtdarknavy,fg=white}
	\setbeamercolor{subsection in toc}{fg=gtdarknavy,bg=white}
	\setbeamercolor{subsection number projected}{bg=gtgold,fg=white}
	
	% header, footer, navigation
	\setbeamercolor*{palette primary}{fg=gtdarknavy,bg=gtgold}
	\setbeamercolor*{palette secondary}{fg=gtdarknavy,bg=gtlightgold}%bottom left
	\setbeamercolor*{palette tertiary}{fg=white,bg=gtdarknavy}%bottom right
	\setbeamercolor*{palette quaternary}{fg=gtdarknavy,bg=gtgold}
	\setbeamercolor*{sidebar}{fg=gtdarknavy,bg=gtgold}
	
	% first page (title)
	\setbeamercolor{titlelike}{fg=white,bg=gtgold}
	\setbeamercolor{frametitle}{fg=white,bg=gtmediumgold}
	\setbeamercolor{frametitle right}{fg=black,bg=gtmediumgold}
	
	%\setbeamercolor*{palette sidebar primary}{fg=gtgold}
	%\setbeamercolor*{palette sidebar secondary}{fg=white}
	%\setbeamercolor*{palette sidebar tertiary}{fg=gtdarknavy,bg=white}
	%\setbeamercolor*{palette sidebar quaternary}{fg=gtgold,bg=gtnavy}
	
	% blocks
	\setbeamercolor{block title}{fg=white,bg=gtdarknavy}
	\setbeamercolor{block body}{fg=black,bg=white!75!bg!95!gtdarknavy}
	%
	\setbeamercolor{alerted text}{fg=gtdarknavy,bg=gtgold} 
	\setbeamercolor{block title alerted}{use=alerted text,fg=white,bg=gtdarknavy}
	\setbeamercolor{block body alerted}{use=alerted text,fg=black,bg=white!75!bg!80!gtdarknavy}
	%
	\setbeamercolor{example text}{fg=gtgold,bg=gtdarknavy} 
	\setbeamercolor{block title example}{use=example text,fg=white,bg=gtgold}
	\setbeamercolor{block body example}{use=example text,fg=black,bg=white!75!bg!90!gtgold}
	
	
	\colorlet{ProgressColor}{gtdarknavy}
	\colorlet{ProgressBack}{gtgold}
	\colorlet{ProgressBorder}{white}
\else
	\setbeamercolor{section in toc}{fg=gtdarknavy,bg=white}
	\setbeamercolor{section number projected}{bg=gtgold,fg=white}
	\setbeamercolor{subsection in toc}{fg=gtdarknavy,bg=white}
	\setbeamercolor{subsection number projected}{bg=gtdarknavy,fg=white}
	
	% header, footer, navigation
	\setbeamercolor*{palette primary}{fg=gtdarknavy,bg=white}
	\setbeamercolor*{palette secondary}{fg=gtdarknavy,bg=gtgold}%bottom left
	\setbeamercolor{navigation}{fg=gtdarknavy,bg=white}
	\setbeamercolor*{palette tertiary}{fg=gtdarknavy,bg=gtlightgold}%bottom right
	\setbeamercolor*{palette quaternary}{fg=gtdarknavy,bg=white}
	\setbeamercolor*{sidebar}{fg=gtdarknavy,bg=gtgold}
	
	% first page (title)
	\setbeamercolor{titlelike}{fg=white,bg=gtdarknavy}
	\setbeamercolor{frametitle}{fg=white,bg=gtdarknavy}
	\setbeamercolor{frametitle right}{fg=white,bg=gtnavy}
	
	%\setbeamercolor*{palette sidebar primary}{fg=gtgold}
	%\setbeamercolor*{palette sidebar secondary}{fg=white}
	%\setbeamercolor*{palette sidebar tertiary}{fg=gtdarknavy,bg=white}
	%\setbeamercolor*{palette sidebar quaternary}{fg=gtgold,bg=gtnavy}
	
	% blocks
	\setbeamercolor{block title}{fg=white,bg=gtdarknavy}
	\setbeamercolor{block body}{fg=black,bg=white!85!bg!95!gtdarknavy}
	%
	\setbeamercolor{alerted text}{fg=gtdarknavy,bg=gtgold} 
	\setbeamercolor{block title alerted}{use=alerted text,fg=white,bg=gtdarknavy}
	\setbeamercolor{block body alerted}{use=alerted text,fg=black,bg=white!75!bg!80!gtdarknavy}
	%
	\setbeamercolor{example text}{fg=gtgold,bg=gtdarknavy} 
	\setbeamercolor{block title example}{use=example text,fg=white,bg=gtgold}
	\setbeamercolor{block body example}{use=example text,fg=black,bg=white!75!bg!90!gtgold}
	
	
	\colorlet{ProgressColor}{gtdarknavy}
	\colorlet{ProgressBack}{white}
	\colorlet{ProgressBorder}{white}
\fi

% if section table of content want, add sectionToc option to the theme
\if@sectionTocOption
	\AtBeginSection[]{%
	\begin{frame}
	\begin{columns}
		\begin{column}{.1\textwidth}
		\end{column}
		\begin{column}{.7\textwidth}
		  	%\frametitle{\insertsection}
			\setcounter{tocdepth}{2}
			\begin{block}{\insertpart}
			\begin{columns}
			\begin{column}{.05\textwidth}
			\end{column}
		  	\begin{column}{.95\textwidth}
		  	\tableofcontents[
		  		currentsection,
		  		%sectionstyle=hide/hide,
		  		subsectionstyle=show/show/hide
			]
		  	\end{column}
		  	\end{columns}
			\vspace*{.5em}
			\end{block}
		\end{column}
		\begin{column}{.1\textwidth}
		\end{column}
	\end{columns}
	\end{frame}
	}
\fi

\if@partTocOption
	% for the list of parts\parttitle
	\makeatletter
	\AtBeginPart{%
	    {
	    	\addtocontents{toc}{\protect\beamer@partintoc{\the\c@part}{\beamer@partname}{\the\c@page}}
			%\setbeamertemplate{headline}{}
			\begin{frame}
			\hypertarget{part\the\c@part}{}
			\partpage	
			%\vspace*{.5em}
			\begin{columns}
			\begin{column}{.05\textwidth}
			\end{column}
			\begin{column}{.95\textwidth}
				\tableofcontents[
				  currentsection,
				  sectionstyle=show/show,
				  subsectionstyle=hide/hide/hide
				  %subsubsectionstyle=show/hide/hide
				]
			\end{column}
			\end{columns}	
			\end{frame} 
		}
	}
	\makeatother
\else
	\makeatletter
	\AtBeginPart{%
		\addtocontents{toc}{\protect\beamer@partintoc{\the\c@part}{\beamer@partname}{\the\c@page}}%
		\hypertarget{part\the\c@part}{}
	}
	\makeatother
\fi

\makeatletter
\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\makeatother

\makeatletter
%\newcommand{\parttableofcontents}{\@starttoc{parttoc}}
%\newcommand{\beamer@partintoc}[3]{#2\par}

% number, shortname, page.
\providecommand\beamer@partintoc[3]{%
  \ifnum\c@tocdepth=-1\relax
    % requesting onlyparts.
    \hyperlink{part#1}{\makebox[4em]{\rom{#1}} #2\vspace{1em}}
    \par
  \fi
}

\define@key{beamertoc}{onlyparts}[]{%
  \c@tocdepth=-1\relax
}
\makeatother%

\setbeamerfont{block title}{size={}}
\let\Tiny=\tiny

\beamersetuncovermixins{\opaqueness<1>{10}}{\opaqueness<2->{5}}
%slide number
\setbeamertemplate{footline}{%
  \leavevmode%
  \hbox{\begin{beamercolorbox}[wd=.5\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm plus1fill,rightskip=.3cm]{author in head/foot}%
    \usebeamerfont{author in head/foot}\insertshortauthor
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.5ex,dp=1.125ex,leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
    \usebeamerfont{title in head/foot}\insertshorttitle  \hfill\insertframenumber\strut\quad 
%/\inserttotalframenumber
  \end{beamercolorbox}}%
}

\usepackage{etoolbox} % this can cause issues with biblatex
\makeatletter
\patchcmd{\slideentry}{\advance\beamer@xpos by1\relax}{}{}{}
\def\beamer@subsectionentry#1#2#3#4#5{\advance\beamer@xpos by1\relax}%
\makeatother

\logo{\includegraphics[width=0.2\textwidth]{logoGT.PNG}}

\mode <all>
